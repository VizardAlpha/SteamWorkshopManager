<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:SteamWorkshopManager.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="1000" d:DesignHeight="600"
        x:Class="SteamWorkshopManager.Views.MainWindow"
        x:DataType="vm:MainViewModel"
        Icon="/Assets/avalonia-logo.ico"
        Title="Steam Workshop Manager - Songs of Syx"
        MinWidth="900" MinHeight="600"
        Width="1000" Height="700">

    <Design.DataContext>
        <vm:MainViewModel/>
    </Design.DataContext>

    <Panel>
        <Grid RowDefinitions="Auto,*,Auto">
            <!-- Header -->
            <Border Grid.Row="0" Background="#1b2838" Padding="16,12">
                <Grid ColumnDefinitions="*,Auto">
                    <StackPanel Orientation="Horizontal" Spacing="12">
                        <TextBlock Text="Steam Workshop Manager"
                                   FontSize="20" FontWeight="SemiBold"
                                   Foreground="White"
                                   VerticalAlignment="Center"/>
                        <TextBlock Text="Songs of Syx"
                                   FontSize="14"
                                   Foreground="#CCFFFFFF"
                                   VerticalAlignment="Center"/>
                    </StackPanel>

                    <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="8">
                        <Button Command="{Binding NavigateToListCommand}"
                                Content="Mes items"/>
                        <Button Command="{Binding NavigateToCreateCommand}"
                                Content="+ Nouveau"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Content -->
            <ContentControl Grid.Row="1" Content="{Binding CurrentView}" Margin="0"/>

            <!-- Status bar -->
            <Border Grid.Row="2" Background="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}"
                    Padding="12,8">
                <StackPanel Orientation="Horizontal" Spacing="8">
                    <Ellipse x:Name="StatusIndicator" Width="8" Height="8" Fill="Red"/>
                    <TextBlock Text="{Binding StatusMessage}"
                               FontSize="12"
                               VerticalAlignment="Center"/>
                </StackPanel>
            </Border>
        </Grid>

        <!-- Toast notification overlay -->
        <Border IsVisible="{Binding IsUploadInProgress}"
                Background="#E0333333"
                CornerRadius="8"
                Padding="16,12"
                HorizontalAlignment="Right"
                VerticalAlignment="Bottom"
                Margin="0,0,24,60"
                MinWidth="300">
            <StackPanel Spacing="8">
                <TextBlock Text="{Binding UploadStatusMessage}"
                           Foreground="White"
                           FontWeight="SemiBold"/>
                <ProgressBar Value="{Binding UploadProgress}"
                             Minimum="0"
                             Maximum="100"
                             Height="6"/>
                <TextBlock Text="{Binding UploadProgressText}"
                           Foreground="#CCFFFFFF"
                           FontSize="11"/>
            </StackPanel>
        </Border>
    </Panel>
</Window>
